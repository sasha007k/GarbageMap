@model GarbageMap.Models.ViewModels.AddCameraViewModel

<div>
    <form asp-controller="Home" asp-action="AddCamera" method="post">
        
        <div class="col-md-12">
            <div class="form-group row">
                <label class="col-md-6 col-form-label font-weight-bold">Select region</label>
                <select class="col-md-6 form-control" asp-for="RegionIndex" asp-items="@ViewData["RegionsList"] as SelectList"></select>
            </div>

            <div class="form-group row">
                <label class="col-md-6 col-form-label font-weight-bold">Select district</label>
                <select class="col-md-6 form-control" asp-for="DistrictIndex" asp-items="@(new SelectList(string.Empty, "Index", "Name"))"></select>
            </div>

            <div class="form-group row">
                <label class="col-md-6 col-form-label font-weight-bold">Select city</label>
                <select class="col-md-6 form-control" asp-for="CityId" asp-items="@(new SelectList(string.Empty, "Id", "Name"))"></select>
            </div>

            <div class="form-group row">
                <label asp-for="Street" class="col-md-6 col-form-label font-weight-bold"></label>
                <input class="col-md-6 form-control" asp-for="Street" type="text" />
            </div>

            <div class="form-group row">
                <label asp-for="HouseNumber" class="col-md-6 col-form-label font-weight-bold"></label>
                <input class="col-md-6 form-control" asp-for="HouseNumber" type="number" />
            </div>

            <div class="form-group row">
                <button class="btn btn-primary col-md-4" type="submit" style="position: absolute; right: 0;">Add</button>
            </div>
        </div>
    </form>
</div>

<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.5.js" type="text/javascript"></script>
<script type="text/javascript">
    $(function() {
        $("#RegionIndex").change(function() {

            var url = '@Url.Content("~/")' + "Home/GetDistrictByIndex";
            var ddResource = "#RegionIndex";
            $.getJSON(url, { regionIndex: $(ddResource).val() }, function (data) {
                var items = '';
                $("#DistrictIndex").empty();
                $.each(data, function(i, row) {
                        items += "<option value='" + row.value + "'>" + row.text + "</option>";
                    });
                $("#DistrictIndex").html(items);
            })
        });
    });

    $(function() {
        $("#RegionIndex").change(function() {

            var url = '@Url.Content("~/")' + "Home/GetCitiesByIndex";
            var regionResource = "#RegionIndex";
            var districtResource = "#DistrictIndex";
            $.getJSON(url, { regionIndex: $(regionResource).val(), districtIndex: $(districtResource).val() }, function (data) {
                var items = '';
                $("#CityId").empty();
                $.each(data, function(i, row) {
                    items += "<option value='" + row.value + "'>" + row.text + "</option>";
                });
                $("#CityId").html(items);
            })
        });
    });

    $(function() {
        $("#DistrictIndex").change(function() {

            var url = '@Url.Content("~/")' + "Home/GetCitiesByIndex";
            var regionResource = "#RegionIndex";
            var districtResource = "#DistrictIndex";
            $.getJSON(url, { regionIndex: $(regionResource).val(), districtIndex: $(districtResource).val() }, function (data) {
                var items = '';
                $("#CityId").empty();
                $.each(data, function(i, row) {
                    items += "<option value='" + row.value + "'>" + row.text + "</option>";
                });
                $("#CityId").html(items);
            })
        });
    });
</script>